"use strict";function CubeModel(){var t=this;this.model=[1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,3,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6],this.U=function(t){this.arbitraryMove([36,38,44,42],[18,0,27,9],[2,29,11,20],[37,41,43,39],[1,28,10,19],t)},this.L=function(t){this.arbitraryMove([0,2,8,6],[36,18,45,35],[42,24,51,29],[1,5,7,3],[39,21,48,32],t)},this.F=function(t){this.arbitraryMove([18,20,26,24],[42,9,47,8],[44,15,45,2],[19,23,25,21],[43,12,46,5],t)},this.R=function(t){this.arbitraryMove([9,11,17,15],[44,27,53,26],[38,33,47,20],[10,14,16,12],[41,30,50,23],t)},this.D=function(t){this.arbitraryMove([45,47,53,51],[24,15,33,6],[26,17,35,8],[46,50,52,48],[25,16,34,7],t)},this.B=function(t){this.arbitraryMove([27,29,35,33],[38,17,51,0],[36,11,53,6],[28,32,34,30],[37,14,52,3],t)},this.E=function(t){var e=[3,21,12,30],r=[4,22,13,31],i=[5,23,14,32];t?(this.rotate(e.reverse()),this.rotate(r.reverse()),this.rotate(i.reverse())):(this.rotate(e),this.rotate(r),this.rotate(i))},this.S=function(t){var e=[39,10,50,7],r=[40,13,49,4],i=[41,16,48,1];t?(this.rotate(e.reverse()),this.rotate(r.reverse()),this.rotate(i.reverse())):(this.rotate(e),this.rotate(r),this.rotate(i))},this.M=function(t){var e=[37,19,46,34],r=[40,22,49,31],i=[43,25,52,28];t?(this.rotate(e.reverse()),this.rotate(r.reverse()),this.rotate(i.reverse())):(this.rotate(e),this.rotate(r),this.rotate(i))},this["U'"]=function(){t.U(!0)},this["R'"]=function(){t.R(!0)},this["F'"]=function(){t.F(!0)},this["D'"]=function(){t.D(!0)},this["L'"]=function(){t.L(!0)},this["B'"]=function(){t.B(!0)},this["M'"]=function(){t.M(!0)},this["S'"]=function(){t.S(!0)},this["E'"]=function(){t.E(!0)},this.arbitraryMove=function(t,e,r,i,s,o){o?(this.rotate(t.reverse()),this.rotate(e.reverse()),this.rotate(r.reverse()),this.rotate(i.reverse()),this.rotate(s.reverse())):(this.rotate(t),this.rotate(e),this.rotate(r),this.rotate(i),this.rotate(s))},this.rotate=function(t){var e=t[0],r=t[1],i=t[2],s=t[3],o=this.model[e];this.model[e]=this.model[s],this.model[s]=this.model[i],this.model[i]=this.model[r],this.model[r]=o},this.wideMove=function(t,e){this[t](e),"L"==t?this.M(e):"R"==t?this.M(!e):"D"==t?this.E(e):"U"==t?this.E(!e):"F"==t?this.S(e):this.S(!e)},this.doMoves=function(t){t=function(t){for(var e=[],r=0;r<t.length;r++){var i=t[r],s=-1!==i.indexOf("w")?2:1;i.length<s+1?e.push(i+"'"):"'"==i[i.length-1]?e.push(i.substring(0,i.length-1)):e.push(t[r])}return e.reverse()}(t);for(var e=0;e<t.length;e++){var r=t[e];2==r.length?"2"==r[1]?(this[r[0]](),this[r[0]]()):"'"==r[1]?this[r]():this.wideMove(r[0],!1):3==r.length?2==r[2]?(this.wideMove(r[0],!1),this.wideMove(r[0],!1)):this.wideMove(r[0],!0):this[r]()}}}function drawStickers(t,e,r,i,s){for(var o=(r-2*i-4*s)/3,n=o,a=0;a<e.length;a++){var h=e[a],u=s+i+a%3*o+s*(a%3),l=s+i+Math.floor(a/3)*n+s*Math.floor(a/3);t.fillStyle="string"==typeof h?h:0!==h?"#444":"#aaa",t.fillRect(u,l,o,n)}return o}function edgePosition(t,e,r,i,s,o){var n=Math.floor(t/3),a=t%3,h=e.w,u=e.h,l=i-(h>u?h:u);switch(n){case 0:return{x:o+i*a+s*a+l,y:o-u-2};case 1:return{x:r-o+2,y:o+i*a+s*a+l};case 2:return{x:o+i*(2-a)+s*(2-a)+l,y:r-o+2};case 3:return{x:o-h-2,y:o+i*(2-a)+s*(2-a)+l}}}function edgeSize(t,e,r,i){var s=Math.floor(t/3),o=e-2*r;return 0==s||2==s?{w:o,h:e/10}:{w:e/10,h:o}}function drawEdges(t,e,r,i,s){for(var o=0;o<e.length;o++){var n=edgeSize(o,r,t.lineWidth,s),a=edgePosition(o,n,i,r,t.lineWidth,s),h=e[o];t.fillStyle="string"==typeof h?h:0!==h?"#444":"#ddd",t.fillRect(a.x,a.y,n.w,n.h)}}function arrow(t,e,r,i,s){var o=Math.atan2(s-r,i-e);t.beginPath(),t.moveTo(e,r),t.lineTo(i,s),t.lineTo(i-12*Math.cos(o-Math.PI/8),s-12*Math.sin(o-Math.PI/8)),t.lineTo(i-12*Math.cos(o+Math.PI/8),s-12*Math.sin(o+Math.PI/8)),t.lineTo(i,s),t.stroke(),t.fill()}function drawArrows(t,e,r,i){t.lineWidth=2,t.strokeStyle=t.fillStyle="#111",t.lineJoin="round";for(var s=(r-2*i)/3,o=s/2,n=0;n<e.length;n++){var a=e[n],h=i+(a[0]-1)%3*s+o,u=i+(a[1]-1)%3*s+o;arrow(t,h,i+Math.floor((a[0]-1)/3)*s+o,u,i+Math.floor((a[1]-1)/3)*s+o)}}function drawCube(t,e,r,i,s){var o=t.getContext("2d"),n=s/18,a=n+3;o.fillRect(a,a,s-2*a,s-2*a),o.lineWidth=3,o.strokeRect(a,a,s-2*a,s-2*a),drawEdges(o,r,drawStickers(o,e,s,n,3),s,n),i.length&&drawArrows(o,i,s,n)}function subarray$1(t,e,r){for(var i=[],s=e>r?function(t){return t-1}:function(t){return t+1},o=e>r?function(t,e){return t>=e}:function(t,e){return t<=e},n=e;o(n,r);n=s(n))i.push(t[n]);return i}function modelToStickers(t){for(var e=0;e<t.length;e++)switch(t[e]){case 1:t[e]="orange";break;case 2:t[e]="#f31";break;case 3:t[e]="#1d1";break;case 4:t[e]="#06f";break;case 5:t[e]="#ddd";break;case 6:t[e]="yellow"}return t}var algPainter={render:function(){var t=this.$createElement;return(this._self._c||t)("canvas",{ref:"ctx",attrs:{width:this.w,height:this.h}})},staticRenderFns:[],props:{stickers:{type:Array,default:[0,0,0,0,0,0,0,0,0],validator:function(t){return 9===t.length}},edges:{type:Array,default:[0,0,0,0,0,0,0,0,0,0,0,0],validator:function(t){return 12===t.length}},arrows:{type:Array,default:[]},moves:{type:String,default:""},auf:{type:String,default:""},w:{type:Number,default:200},h:{type:Number,default:200}},computed:{size:function(){return{w:this.w,h:this.h}}},mounted:function(){if(this.moves.length){var t=new CubeModel,e=this.moves.split(" ");t.doMoves(e),this.auf.length&&t.doMoves([this.auf]),this.stickers=modelToStickers(subarray(t.model,36,44)),this.edges=modelToStickers([].concat(subarray$1(t.model,29,27),subarray$1(t.model,11,9),subarray$1(t.model,20,18),subarray$1(t.model,2,0)))}drawCube(this.$refs.ctx,this.stickers,this.edges,this.arrows,this.w)}},AlgPainter={install:function(t,e){t.component("alg",algPainter)}};"undefined"!=typeof window&&window.Vue&&window.Vue.use(AlgPainter),module.exports=AlgPainter;
